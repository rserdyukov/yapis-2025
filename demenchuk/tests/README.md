# Тесты компилятора RivScript

## Структура тестов

Тесты организованы по модулям компилятора:

### 1. `test_lexer.py` — Лексический анализатор
Проверяет:
- **Корректные примеры** (`examples/correct/*.riv`) — должны успешно токенизироваться
- **Ошибки лексера** (`examples/errors/lexer/*.riv`) — должны выдавать лексические ошибки

**Результаты:** ✅ 15/15 (100%)

### 2. `test_parser.py` — Синтаксический анализатор
Проверяет:
- **Корректные примеры** — должны успешно парситься
- **Ошибки парсера** (`examples/errors/parser/*.riv`) — должны выдавать синтаксические ошибки

**Результаты:** ✅ 22/22 (100%)

### 3. `test_semantic.py` — Семантический анализатор
Проверяет:
- **Корректные примеры** — не должны иметь семантических ошибок
- **Ошибки семантики** (`examples/errors/semantic/*.riv`) — должны выдавать семантические ошибки

**Результаты:** ✅ 17/17 (100%)

### 4. `test_compiler.py` — Интеграционные тесты
Проверяет полный pipeline компиляции:
- **Корректные примеры** — должны успешно компилироваться в WAT
- **Все ошибки** — должны выявляться на соответствующем этапе

**Результаты:** ✅ 36/36 (100%)

## Запуск тестов

### Отдельные модули
```bash
python3 tests/test_lexer.py
python3 tests/test_parser.py
python3 tests/test_semantic.py
python3 tests/test_compiler.py
```

### Все тесты сразу
```bash
./scripts/run_all_tests.sh
```

## Формат вывода

Все тесты используют единый формат:

```
✓ filename.riv
    Expected: ERROR: ожидаемое сообщение
    Actual:   [E301] фактическое сообщение

✗ filename.riv
    Expected: SUCCESS
    Actual:   ERROR: неожиданная ошибка
```

## Примеры с ошибками

Каждый файл с ошибкой содержит комментарий с ожидаемым результатом:

```rivscript
# LEXER ERROR
# Ожидаемая ошибка: Invalid character '@' at line 4

x = 10
@ invalid
```

## Итоги

**Всего тестов:** 90  
**Прошло:** 90 (100%) ✅

Все уровни компилятора работают корректно:
- ✅ Лексический анализ
- ✅ Синтаксический анализ  
- ✅ Семантический анализ (включая проверку типов)
- ✅ Генерация WAT кода
